@page "/weatherreport"
@inject BlazorApp50.Data.WeatherContext db
@inject IToastService toastService

<h3>Weather Report</h3>

<EditForm Model="Report" OnSubmit="Save">
    Temperature (F) <InputNumber @bind-Value="Report.TemperatureF" class="form-control"/><br />
    Dew Point (F) <InputNumber @bind-Value="Report.DewPointF" class="form-control" /><br />
    Summary <InputTextArea @bind-Value="Report.Summary" class="form-control"/><br />

    <button type="submit" class="btn btn-primary">Save</button>
</EditForm>

@code {

    private Data.WeatherReport Report = new Data.WeatherReport();

    private void Save()
    {
        Report.CreatedDate = DateTime.UtcNow;
        db.Add(Report);
        var changeCount = db.SaveChanges();

        if (changeCount > 0)
        {
            toastService.ShowSuccess("Saved!");

            Report = new Data.WeatherReport();
        }
    }
}
